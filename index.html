<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PWM calculator</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/draw.js"></script>
    <script src="js/interaction.js"></script>
    <script src="js/loader.js"></script>
    <script src="./js/pwm.js"></script>
    <script src="./js/linegroup.js"></script>
    <script src="./bezier.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </head>
  <body>
  <div class="container">
    <header>
      <h1>PWM Lookup Table Generator</h1>
      <p>This is totally alpha status, so don't expect too much.<br>
      Double click the line to add points.<br>
      Simulation isn't perfect due to only have 8 bits of brightness available via HTML, but should accurately depict <i>some</i> amount of quantization error encountered at lower PWM resolutions.<br>
      This does not yet prevent you from having more than 1 y value per x value, so weird things will happen if you do that.</p>
    </header>
    <div class="container-fluid">
          <canvas id=cvs style="border: 1px solid black; width: 100%"></canvas><script>
            var c, lg, draw
            document.body.onload = function(){
              c = new Bezier(0,0, 150,480, 480,480, 500,0)
              lg = new LineGroup(c);
              draw = new Draw(document.getElementById('cvs'))
              draw.drawSkeleton(lg)
              draw.drawCurve(lg)
              handleInteraction(document.getElementById('cvs'), draw)
              simStep(0)
              document.getElementById('cvs').onresize = function(){console.log('resize')}
            }
          </script>
    </div>
    <div class="container-fluid">
        <div class="row">
          <div class="col-lg-1">
              <label>Number of Values</label>
                <input id=points type=number value=32>
                <text>Animation Time</text>
                  <input id=time type=number value=2.2><text>s</text>
                  <text>PWM Resolution</text>
                <input id="pwmres" value="8"><text>bits</text>
            </div>
          </div>
          <div class=container style="background-color: #000000; height: 150px; width: 150px; display: flex;
justify-content: center; align-items: center;">
          <div class=container id="sim" style="background-color: #ff0000; height:50px; width:50px;"></div>
          </div>
    </div>  
    <font face=monospace size=2><p style="word-wrap: break-word; width: 100%" id="output">nothing</p></font>
  </body>
</html>
